<!DOCTYPE html>
<!-- The previous line tells the browser, that the page uses the HTML5 standard. -->

<html>
	<head>
		<title>Physi Test</title>
		<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
		<!-- The following meta line optimizes the site for mobile devices. It sets the viewport size
		to the screen size, so it will be displayed maximized, but unscaled. -->
		<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
		<!-- Include Three.js libraries -->
		<script src="three.js"></script>
		<script src="physi.js"></script>
	</head>
	<body>
		<div id="test"></div>

		<script>
			Physijs.scripts.worker = '/periodicTable/physijstest/physijs_worker.js';
		  Physijs.scripts.ammo = '/periodicTable/physijstest/ammo.js';

	    var initScene, render, renderer, scene, camera, box;

	    initScene = function() {
	        renderer = new THREE.WebGLRenderer({ antialias: true });
	        renderer.setSize( window.innerWidth, window.innerHeight );
	        document.getElementById( 'test' ).appendChild( renderer.domElement );

	        scene = new Physijs.Scene;
					scene.setGravity(new THREE.Vector3(50,0,0));
					scene.addEventListener('update', function() {
				    scene.simulate();
					});

	        camera = new THREE.PerspectiveCamera(
            35,
            window.innerWidth / window.innerHeight,
            1,
            1000
	        );
	        camera.position.set( 60, 50, 60 );
	        camera.lookAt( scene.position );
	        scene.add( camera );

	        // Box
	        box = new Physijs.BoxMesh(
	            new THREE.CubeGeometry( 5, 5, 5 ),
	            new THREE.MeshBasicMaterial({ color: 0x888888 })
	        );
	        scene.add( box );
					// box.applyCentralImpulse(new THREE.Vector3(0,1000000,0));

	        requestAnimationFrame( render );
	    };

	    render = function() {
	        scene.simulate(); // run physics
	        renderer.render( scene, camera); // render the scene
	        requestAnimationFrame( render );
	    };

	    window.onload = initScene();

		</script>
	</body>
</html>
